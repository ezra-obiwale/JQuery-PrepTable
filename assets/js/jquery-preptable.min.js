!function(){var t={length:0},a={};jQuery.fn.prepTable=function(e){function s(a){t[a].sortable===!1||void 0==t[a].sortable&&!v.sortable||$.each($("#"+a+">table>thead>tr>th"),function(t,a){return $(this).hasClass("no-sort")||v.columns[t]&&v.columns[t].sortable===!1?!0:($(a).append("<span>&nbsp;&nbsp;&nbsp;&nbsp;</span>"),$(this).addClass("sort").attr("title","Click to order").data("pos",t),void(v.columns[t]&&$(this).data("colName",v.columns[t].data)))})}function r(a){var e=t[a].limitsValues?t[a].limitsValues.split(","):v.limits.values,s=t[a].limitsDefault||v.limits["default"];if(!e)return void console.error("Limits must have values of array values");var r=$("#"+a+" .before-table").append('<label class="jq-limit">Show <select /> entries</label>').find(".jq-limit>select");(t[a].limits===!1||void 0===t[a].limits&&!v.limits)&&(r.parent().css("display","none"),s="all"),$.each(e,function(t,a){var e=a==s?'selected="selected"':"";r.append("<option "+e+' value="'+a+'">'+a+"</option>")}),(t[a].limitsAll||t[a].limitsAll!==!1&&v.limits.all)&&r.append("<option "+("all"==s?'selected="selected"':"")+' value="">All</option>')}function l(a){var e=$("#"+a+" .before-table").append('<div class="jq-search"><label for="search">Search</label> <input id="search" type="text" /></div>').children(".jq-search");(t[a].searchable===!1||void 0===t[a].searchable&&!v.searchable)&&e.css("display","none"),$.each(v.columns,function(e,s){return void 0===s.searchable||s.searchable?(t[a].searchables||(t[a].searchables=""),e&&(t[a].searchables+=","),void(t[a].searchables+=s.data)):!0})}function o(t,a,e){if($("#"+t+" .after-table>.jq-label").remove(),a.label!==!1&&(void 0!==a.label||v.label)&&a.data.length){var s=a.start?a.start*d(t)+1:1,r=s+d(t)-1;(!r||r>a.total)&&(r=a.total),$("#"+t+" .after-table").append('<div class="jq-label">Showing <span class="start">'+(a.append?1:s)+'</span> to <span class="showing">'+(a.append&&e?$("#"+t+">table>tbody>tr").length:r)+'</span> of <span class="total">'+a.total+"</span> entries</div>")}}function i(t,a){var e=a.start+1;if($("#"+t+" .after-table>.jq-pagination").remove(),a.pagination!==!1&&v.pagination&&a.data.length){"boolean"==typeof v.pagination&&(v.pagination={firstLast:!1,nextPrevious:!0,numbers:!1,maxButtons:12});var s=a.start?a.start*d(t):0,r="",l="",o="",i=a.paginationMaxButtons||v.pagination.maxButtons;if(i||(i=12),(a.paginationNextPrevious||a.paginationNextPrevious!==!1&&v.pagination.nextPrevious)&&(l="<button "+(0===s?'disabled="disabled"':"")+' class="prev '+(0===s?"disabled":"")+'">&larr; Previous</button>',r="<button "+(isNaN(d(t))||s+d(t)>=a.total?'disabled="disabled"':"")+' class="next '+(isNaN(d(t))||s+d(t)>=a.total?"disabled":"")+'">Next &rarr;</button>',i-=2),(a.paginationFirstLast||a.paginationFirstLast!==!1&&v.pagination.firstLast)&&(l="<button "+(0===s?'disabled="disabled"':"")+' class="first '+(0===s?"disabled":"")+'">&larrb; First</button>'+l,r+="<button "+(isNaN(d(t))||s+d(t)>=a.total?'disabled="disabled"':"")+' class="last '+(isNaN(d(t))||s+d(t)>=a.total?"disabled":"")+'">Last &rarrb;</button>',i-=2),a.paginationNumbers||a.paginationNumbers!==!1&&v.pagination.numbers&&i){8>i&&(i=8);var n=Math.ceil(a.total/d(t)),c=n>i?i:n,p=Math.floor(c/2),b=Math.floor(p/3),h=p-b,u=h,f=1,m=e;2*h-b>=e?h=!1:e>=n-u-b+1&&(b+=u,m=n,u=!1);for(var g=1;c>=g&&!(f>n);g++){o+='<button id="_'+(g-1)+'"',f===e&&(o+=' class="current" disabled="disabled"'),o+=">"+f+"</button>";var j=f;f++,n!==c&&(h&&g===h||u&&g===c-u+1)&&(g===h?(g>e&&(m=Math.ceil(n/2)),f=m-b):f=n-u+2,f>j+1&&(o+='<span class="ellipsis">...</span>'),f===j&&f++)}}$("#"+t+" .after-table").append('<div class="jq-pagination">'+l+o+r+"</div>")}}function n(a,e,s){s="ERROR "+e+" (http://ezra-obiwale.github.io/JQuery-PrepTable/#errors):\r  -  "+s,(t[a].logErrors||t[a].logErrors!==!1&&v.log_errors)&&console.error(s),(t[a].displayErrors||t[a].displayErrors!==!1&&v.display_errors)&&$("#"+a+" .jq-msg").addClass("error").html(s),(t[a].alertErrors||t[a].alertErrors!==!1&&v.alert_errors)&&alert(s)}function d(t){return parseInt($("#"+t+" .before-table .jq-limit>select").val())}function c(e){a[e]||(a[e]={}),a[e].rows=$("#"+e+">table>tbody>tr"),t[e].total=a[e].rows.length,""!==d(e)&&($("#"+e+">table>tbody>tr").each(function(t,a){return t==d(e)?!1:void $(a).addClass("__showing")}),$("#"+e+">table>tbody>tr:not(.__showing)").detach(),$("#"+e+">table>tbody>tr").removeClass("__showing")),o(e,$.extend({data:$("#"+e+">table>tbody>tr"),total:a[e].rows.length},t[e]),!0),i(e,$.extend({data:$("#"+e+">table>tbody>tr"),total:a[e].rows.length},t[e]))}function p(e,s){var r=$("#"+e+">table>tbody"),l=$("#"+e+" .before-table .jq-search input").val().toLowerCase(),n=0,c=0,p=0;$("#"+e+" .jq-msg").addClass("info").hide(),!t[e].order||a[e].order&&(!a[e].order||t[e].order.index===a[e].order.index&&t[e].order.dir===a[e].order.dir)||(b(e),a[e].order=t[e].order),$.each(a[e].rows,function(t,a){return l&&-1==$(a).text().toLowerCase().indexOf(l)?!0:s>p?(l&&n++,p++,!0):d(e)&&c===d(e)?(n++,l):(r.append(a),n++,void c++)}),n=l?n:a[e].rows.length,o(e,$.extend({data:$("#"+e+">table>tbody>tr"),total:n},t[e]),!0),i(e,$.extend({data:$("#"+e+">table>tbody>tr"),total:n},t[e])),$("#"+e+">table>tbody>tr").length||$("#"+e+" .jq-msg").addClass("info").removeClass("active").html(t[e].emptyMessage||v.empty_message).show()}function b(e){return a[e].rows.sort(function(a,s){var r=$(a).children("td").eq(t[e].order.index).text().toUpperCase(),l=$(s).children("td").eq(t[e].order.index).text().toUpperCase();return l>r?"desc"===t[e].order.dir?1:-1:"desc"===t[e].order.dir?-1:1})}function h(e,s,r){t[e].append&&r||$("#"+e+">table>tbody>tr:not(._"+(s+1)+")").remove(),t[e].cache&&a[e]&&a[e][s]&&a[e][s].limit==d(e)?r||!t[e].append?($.extend(t[e],a[e][s]),m(e)):(o(e,a[e][s],!0),i(e,a[e][s])):!r&&t[e].append?(o(e,a[e][s],!0),i(e,a[e][s])):a[e]&&a[e].rows?p(e,d(e)?s*d(e):0):u(e)}function u(a){if(t[a]&&!t[a].ajax&&t[a].data.length>d(a))return void m(a);if(t[a].ajax){$("#"+a+" .jq-msg").addClass("info").html(t[a].loadingMessage||v.loading_message).fadeIn();var e=t[a].ajax.url,s={},r=d(a);"get"===t[a].ajax.type.toLowerCase()?(e+="?search[columns]="+encodeURIComponent(t[a].searchables)+"&search[value]="+encodeURIComponent($("#"+a+" .before-table>.jq-search input").val())+"&limit="+(isNaN(r)?"":r)+"&start="+(isNaN(r)?0:r*t[a].start),t[a].order&&(e+="&order[column]="+t[a].order.column+"&order[dir]="+t[a].order.dir)):(s={search:{columns:t[a].searchables,value:encodeURIComponent($("#"+a+" .before-table>.jq-search input").val())},limit:isNaN(r)?"":r,start:isNaN(r)?0:r*t[a].start},t[a].order&&(s.order=t[a].order)),$("#"+a+" .after-table>.jq-label,#"+a+" .after-table>.jq-pagination").remove(),$.ajax({url:e,data:s,type:t[a].ajax.type,success:function(e){(t[a].logData||t[a].logData!==!1&&v.log_data)&&console.info("RESPONSE",e),"string"==typeof e&&(e=$.parseJSON(e)),$("#"+a+" .jq-msg").html(""),f(a,e),$("#"+a+" .jq-msg").hide()},error:function(t){n(a,"T0","Connection error: "+t.responseText)}})}}function f(a,e){if($.isArray(e))t[a].data=e,t[a].start=0,t[a].total=e.length;else{if(!$.isPlainObject(e))return n(a,"T1","Response data must be an object"),!1;if(!$.isArray(e.data))return n(a,"T3","Data in <Response> must be an array"),!1;if(isNaN(e.total))return n(a,"T2","Response object must contain key <total> with an <integer value>"),!1;t[a].data=e.data,t[a].total=e.total}t[a].timeout=0,t[a].limit=d(a),m(a)}function m(e){var s=t[e];if(s.data.length||$("#"+e+" .jq-msg").addClass("info").removeClass("active").html(t[e].emptyMessage||v.empty_message),s.total){a[e]||(a[e]={}),a[e][s.start]=$.extend({},s),i(e,s),o(e,s);var r=$("#"+e+">table");r.children("tbody").is("tbody")||r.append("<tbody />");var l=r.children("tbody");t[e].append||l.html(""),$.each(s.data,function(a,r){if(!s.ajax){if(s.start&&a<s.start)return!0;if(s.total>=s.data.length&&a===(d(e)||0+s.start))return!1}var o=l.append("<tr />").find("tr:last-child");l.children().addClass("_"+(t[e].start+1)),s.createRow?s.createRow.call($("#"+e+">table")[0],o[0],r,a):"function"==typeof v.createRow&&v.createRow.call($("#"+e+">table")[0],o[0],r,a)})}}var v={columns:[],data:[],ajax:null,append:!1,limits:{values:[10,20,50,100,200],all:!0,"default":10},searchable:!0,sortable:!0,label:!0,pagination:{firstLast:!1,nextPrevious:!0,numbers:!1,maxButtons:12},loading_message:"Loading table...",empty_message:"NO ENTRIES FOUND.",display_errors:!1,log_errors:!0,log_data:!1,alert_errors:!0,cache:!1,createDivs:!0,createRow:function(t,a,e){$.isPlainObject(a)&&v.columns.length?$.each(v.columns,function(e,s){$(t).append("<td>"+a[s.data]+"</td>")}):$.isArray(a)?$.each(a,function(a,e){$(t).append("<td>"+e+"</td>")}):n($(this).parent().attr("id"),"T4","DATA.data["+e+"] must be either an array or an object")}};return $.extend(v,e),this.each(function(e,o){var i="table_"+t.length;if(t.length++,t[i]=$.extend({},$(o).data()),t[i].start=0,t[i].config=v,"boolean"!=typeof t[i].append&&(t[i].append=v.append),"boolean"!=typeof t[i].cache&&(t[i].cache=v.cache),$(o).wrap('<div id="'+i+'" class="jq-table" />'),t[i].createDivs!==!1||void 0===t[i].createDivs&&v.createDivs)$("#"+i).prepend('<div class="before-table" />'),$("#"+i).append('<div class="after-table"><div class="jq-msg"></div></div>');else{$(o).children("thead").length||$(o).append("<thead/>"),$(o).children("tfoot").length||$(o).append("<tfoot/>");var n=$(o).children("thead").children("tr:first-child").children("th").length;$(o).children("thead").prepend('<tr><td class="before-table" colspan="'+(n?n:100)+'">&nbsp;</td></tr>'),$(o).children("tfoot").append('<tr><td class="after-table" colspan="'+(n?n:100)+'"><div class="jq-msg"></div></td></tr>')}if(s(i),r(i),l(i),$(o).data("createRow")){var p=$(o).data("createRow");if(window[p]&&"function"==typeof window[p])t[i].createRow=window[p];else if(-1!=p.indexOf(".")){var b=window;$.each(p.split("."),function(t,a){return b[a]?void(b=b[a]):!1}),"function"==typeof b&&(t[i].createRow=b)}}$(o).data("ajaxUrl")?(t[i].ajax={url:$(o).data("ajaxUrl"),type:$(o).data("ajaxType")?$(o).data("ajaxType"):"get"},u(i)):v.ajax?("string"==typeof v.ajax?t[i].ajax={url:v.ajax,type:"get"}:$.isPlainObject(v.ajax)&&!v.ajax.type&&(t[i].ajax=v.ajax,t[i].ajax.type="get"),u(i)):v.data.length?f(i,v.data):c(i),$(o).parent().on("change",".before-table .jq-limit>select",function(){var e=$(this).closest(".jq-table").attr("id");$(this).val()&&t[e].start*parseInt($(this).val())>t[e].total&&(t[e].start=Math.floor(t[e].total/parseInt($(this).val()))-1),t[e].append&&(t[e].start=0,$("#"+e+">table>tbody").html(""),a[e]={}),h(e,t[e].start,t[e].append)}),$(o).parent().on("click","table>thead>tr>th.sort",function(){var a=$(this).closest(".jq-table").attr("id");$(this).siblings().removeClass("asc desc"),t[a].order={index:$(this).index(),column:$(this).data("colName")},$(this).hasClass("asc")?(t[a].order.dir="desc",$(this).removeClass("asc").addClass("desc")):(t[a].order.dir="asc",$(this).removeClass("desc").addClass("asc")),h(a,t[a].start,t[a].append)}),$(o).parent().on("click",".after-table>.jq-pagination>button",function(){if(!$(this).hasClass("disabled")){$(this).addClass("disabled");var a=$(this).closest(".jq-table").attr("id"),e=!1;if(-1!==$(this).html().indexOf("First"))t[a].start=0;else if(-1!==$(this).html().indexOf("Last"))t[a].start=Math.floor(t[a].total/d(a)),t[a].start*d(a)>=t[a].total&&t[a].start--,e=!0;else if(-1!==$(this).html().indexOf("Next"))t[a].start++,e=!0;else if(-1!==$(this).html().indexOf("Previous"))t[a].start>0&&t[a].start--;else{var s=parseInt($(this).text());s-1>t[a].start&&(e=!0),t[a].start=s-1}h(a,t[a].start,e)}}),$(o).parent().on("keyup",".before-table .jq-search input",function(){var a=$(this).closest(".jq-table").attr("id");clearTimeout(t[a].timeout),t[a].start=0,t[a].timeout=setTimeout(h,500,a,t[a].start,t[a].append)})}),this}}(jQuery);